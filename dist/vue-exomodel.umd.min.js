!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.VueExoModel={})}(this,function(e){"use strict";function a(e,t){return e[t]}var n=Object.prototype.hasOwnProperty;function f(e,t){return n.call(e,t)}var r=[];function u(e,n){if(null!=e){if(0<=r.indexOf(e))return;var t=n.ExoModel$Model,o=(n.ExoModel$Property,n.VueExoModel$observeEntity);e instanceof t&&(e.entityRegisteredEvent.subscribe(function(e,t){o(t.entity)}),e.types.forEach(function(e){e.known().forEach(function(e){o(e)})}),e.propertyAddedEvent.subscribe(function(e,t){i(t.property,n)}),e.types.forEach(function(e){e.properties.forEach(function(e){return i(e,n)})}),r.push(e))}}var t=[];function i(e,r){if(null!=e){if(0<=t.indexOf(e))return;var i=r.Vue$Dep,a=r.VueExoModel$observeEntity;e instanceof r.ExoModel$Property&&(e.accessedEvent.subscribe(function(e,t){var n=s(e,t.property,r);if(i.target){n.depend();var o=a(t.value);o?o.dep.depend():Array.isArray(t.value)&&function e(t){for(var n,o=0,r=t.length;o<r;o++)(n=t[o])&&n.__ob__&&n.__ob__.dep.depend(),Array.isArray(n)&&e(n)}(t.value)}}),e.changedEvent.subscribe(function(e,t){var n=s(e,t.property,r);a(t.newValue),n.notify()}),t.push(e))}}function s(e,t,n){var o,r=t.fieldName+"_Dep",i=n.Vue$Dep,a=e;return f(a,r)&&a[r]instanceof i?o=a[r]:(o=new i,Object.defineProperty(a,r,{configurable:!0,enumerable:!1,value:o,writable:!0})),o}function c(e,t){var n,o,r,i;if(!t.entitiesAreVueObservable)return o=(n=t).Vue$Observer,(((r=function(){o.apply(this,arguments)}).prototype=new o({})).constructor=r).prototype.walk=function(){},n.VueExoModel$EntityObserver=r,(i=t).VueExoModel$observeEntity=function(e,t){void 0===t&&(t=!1);var n,o=i.ExoModel$Entity,r=i.VueExoModel$EntityObserver;if(e instanceof o)return n=f(e,"__ob__")&&a(e,"__ob__")instanceof r?a(e,"__ob__"):new r(e),t&&n&&n.vmCount++,n},u(e,t),t.entitiesAreVueObservable=!0,t;u(e,t)}function d(e,t,n){Object.defineProperty(e,n.name,{configurable:!0,enumerable:!0,get:function(){return this[t][n.name]},set:function(e){this[t][n.name]=e}})}function o(e,o){var r=o.ExoModel$Entity;e.mixin({beforeCreate:function(){var t=this,e=function(e){return null!=e&&e instanceof r?(t._entity=e,{}):e};if(t.$options.data)if(t.$options.data instanceof Function){var n=t.$options.data;t.$options.data=function(){return e(n.apply(this,arguments))}}else{o.entitiesAreVueObservable||(t.$options.data=e(t.$options.data))}},created:function(){var e=this;if(e._entity){o.Vue$Observer=e._data.__ob__.constructor,o.Vue$Dep=e._data.__ob__.dep.constructor;var t=c(e._entity.meta.type.model,o).VueExoModel$observeEntity;e._data=e._entity,function(e,t){for(var n,o,r=e.meta.type.properties,i=t.$options.props,a=t.$options.methods,u=0;u<r.length;u++){var s=r[u];a&&f(a,s.name)?s.name:i&&f(i,s.name)?s.name:(n=s.name,36!==(o=(n+"").charCodeAt(0))&&95!==o&&d(t,"_data",s))}}(e._entity,e),t(e._entity,!0),e._entity=null}}})}var p={entitiesAreObservable:!1,ExoModel$Model:exomodel.Model,ExoModel$Entity:exomodel.Entity,ExoModel$Property:exomodel.Property};e.install=function(e){return o(e,p)},Object.defineProperty(e,"__esModule",{value:!0})});
